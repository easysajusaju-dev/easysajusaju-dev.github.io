<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ì´ì§€ì‚¬ì£¼ ë¬´ë£Œìš´ì„¸ - ë‹¹ì‹ ì˜ ìš´ëª…ì˜ ë¬¸ì„ ë‘ë“œë¦¬ì„¸ìš”!</title>

    <!-- ==================== â­ íŒŒë¹„ì½˜ ì„¤ì • ì½”ë“œ ==================== -->
    <link rel="apple-touch-icon" sizes="180x180" href="https://easysaju-test.vercel.app/images/apple-icon-180x180.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="https://easysaju-test.vercel.app/images/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="96x96" href="https://easysaju-test.vercel.app/images/favicon-96x96.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="https://easysaju-test.vercel.app/images/favicon-16x16.png" />
    <link rel="shortcut icon" href="https://easysaju-test.vercel.app/images/favicon.ico" />
    <!-- =========================================================== -->

    <!-- OG -->
    <meta property="og:title" content="ì´ì§€ì‚¬ì£¼" />
    <meta property="og:description" content="13ë…„ ëª…ë¦¬ì „ë¬¸ê°€ê°€ ë¶„ì„í•´ ë“œë¦¬ëŠ” ë‹¹ì‹ ì˜ ìš´ì„¸" />
    <meta property="og:image" content="https://easysaju-test.vercel.app/images/share.png" />
    <meta property="og:url" content="https://easysaju-test.vercel.app/" />
    <meta property="og:type" content="website" />

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>

    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="style_index.css" />

    <style>
        /* footer */
        #copy { max-width: 800px; margin: auto; padding: 10px; font-size: 12px; color: #666; }

        /* ì‚¬ì´ë“œ ë©”ë‰´ */
        #side-nav {
            position: fixed; top: 0; left: 0; height: 100%; width: 250px;
            background: white; transform: translateX(-100%);
            transition: transform .3s; z-index: 1000;
        }
        #side-nav.active { transform: translateX(0); }
        #nav-overlay {
            position: fixed; inset: 0; background: rgba(0,0,0,.5);
            display: none; z-index: 999;
        }
        #nav-overlay.active { display: block; }

        /* ì„±ë³„/ì–‘ë ¥ ë²„íŠ¼ */
        .select-btn {
            flex: 1; padding: 14px 0; border-radius: 10px; font-size: 17px;
            border: 2px solid #ddd; font-weight: 700; text-align: center;
            cursor: pointer; background: #f9f9f9;
        }
        .select-btn.active {
            background: #4ecdc4; color: #fff; border-color: #4ecdc4;
        }
    </style>

    <!-- prewarm -->
    <script>
        (function(){
            ["https://my-payment-server-test.vercel.app/api/ping",
             "https://my-manseryeok.onrender.com/ping"]
            .forEach(url=>{
                const c=new AbortController();
                setTimeout(()=>c.abort(),4000);
                fetch(url,{signal:c.signal,cache:"no-store"}).catch(()=>{});
            });
        })();
    </script>
    <style>
/* 1) ì…ë ¥ í¼ ê¸€ì”¨ í°ìƒ‰ ë¬¸ì œ í•´ê²° */
input, textarea, select {
    color: #1f2937 !important; /* text-gray-800 */
}

/* placeholderë„ íšŒìƒ‰ìœ¼ë¡œ ì§€ì • */
input::placeholder,
textarea::placeholder {
    color: #9ca3af !important; /* text-gray-400 */
}

/* 2) í† ê¸€ ë²„íŠ¼ ë¹„í™œì„±/í™œì„± ê¸€ì”¨ ìƒ‰ìƒ ì •ìƒí™” */
.btn-toggle {
    color: #374151 !important; /* text-gray-700 */
}
.btn-toggle.active {
    color: white !important;
}

/* 3) ì´ë¯¸ì§€ì™€ í¼ ì‚¬ì´ ê°­ ì œê±° */
.image-section img {
    display: block;
    margin: 0;
    padding: 0;
}

.main-container {
    padding: 0 !important;
}

.form-container {
    margin-top: 0 !important;
}

/* í˜¹ì‹œ ë‚¨ì•„ ìˆëŠ” ì—¬ë°±ê¹Œì§€ ëª¨ë‘ ì œê±° */
.image-section {
    margin: 0 !important;
    padding: 0 !important;
}

</style>

</head>

<body>

<!-- í—¤ë” -->
<div class="sticky-header">
    <a href="javascript:void(0);" id="open-nav-btn" class="header-logo-link">
        <span class="burger">&#9776;</span>
        <span class="header-title">ë¬´ë£Œì‚¬ì£¼</span>
    </a>
    <a href="#fortuneForm" class="header-button">ì‚¬ì£¼ë¶„ì„ ì‹ ì²­í•˜ê¸°</a>
</div>

<!-- ì‚¬ì´ë“œ ë©”ë‰´ -->
<div id="nav-overlay"></div>
<nav id="side-nav">
    <div class="nav-header">
        <div class="logo-in-nav">
            <img src="logo.png" alt="ë¡œê³ " />
            <span>ì´ì§€ì‚¬ì£¼</span>
        </div>
        <a href="javascript:void(0);" id="close-nav-btn">&times;</a>
    </div>

    <ul class="nav-menu">
        <li><a href="index.html">í™ˆìœ¼ë¡œ ê°€ê¸°</a></li>

        <li class="accordion">
            <div class="accordion-header">ì‚¬ì£¼ ë¶„ì„ ì‹ ì²­ <span class="arrow">&#9662;</span></div>
            <div class="accordion-content">
                <a href="saju_1p.html">í”„ë¦¬ë¯¸ì—„ ì¢…í•©ì‚¬ì£¼</a>
                <a href="saju_2p.html">ì¬íšŒìš´(ê¶í•©)</a>
                <a href="saju_free.html">ì‹ ë…„ìš´ì„¸</a>
            </div>
        </li>

        <li class="accordion">
            <div class="accordion-header">ë¬´ë£Œ ìš´ì„¸ <span class="arrow">&#9662;</span></div>
            <div class="accordion-content">
                <a href="https://todayluck.coredev.co.kr/fortune-lab/yeyiqu" target="_blank">ì˜¤ëŠ˜ì˜ ìš´ì„¸</a>
                <a href="saju_new.html">ë¬´ë£Œ ìš´ì„¸ ë³´ê¸°</a>
            </div>
        </li>

        <li><a href="easysaju.html">ë§Œì„¸ë ¥ ì¡°íšŒ</a></li>
    </ul>

    <div class="nav-footer">
        <a href="http://pf.kakao.com/_xkAevn/chat" target="_blank" class="kakao-btn">ì¹´ì¹´ì˜¤ ë¬¸ì˜</a>
        <p>ìš´ì˜ì‹œê°„ í‰ì¼ 09:00~18:00</p>
    </div>
</nav>

<div class="main-container">
    <!-- ìƒë‹¨ ì´ë¯¸ì§€ -->
    <div class="image-section">
        <img src="images/saju1/0.png" class="scroll-to-form" />
        <img src="images/saju1/002.png" class="scroll-to-form" />
        <img src="images/saju1/003.png" class="scroll-to-form" />
        <img src="images/saju1/004.png" class="scroll-to-form" />
        <img src="images/saju1/ì•¡ë§‰ì´ ì‚¬ê³¼(5-6).gif" class="scroll-to-form" />
        <img src="images/saju1/007.png" class="scroll-to-form" />
    </div>
    <!-- â˜…â˜…â˜…â˜…â˜… ì´ˆê°„ê²° ì…ë ¥í¼ ì˜ì—­ ì‹œì‘ â˜…â˜…â˜…â˜…â˜… -->
    <div class="form-container mt-6">

        <form id="fortuneForm" method="POST"
            action="https://script.google.com/macros/s/AKfycbzij2Oorrv6DqmmEGcTXrDkj7wqbmpr_Wl2C3nXJGARLcc1oFdZtUaH8AkFVgZdrajo/exec"
            class="space-y-6">

            <!-- ì„±ë³„ -->
            <div class="p-5 bg-white border border-gray-200 rounded-2xl shadow-sm">
                <label class="font-bold text-xl text-gray-800 mb-3 block">ì„±ë³„</label>

                <div class="flex gap-3">
                    <div class="select-btn btn-toggle" id="genderM" data-value="ë‚¨ì„±">ë‚¨ì„±</div>
                    <div class="select-btn btn-toggle" id="genderF" data-value="ì—¬ì„±">ì—¬ì„±</div>

                </div>

                <input type="hidden" name="gender" id="gender" value="ë‚¨ì„±" />
            </div>

            <!-- ì´ë¦„ / ì „í™”ë²ˆí˜¸ -->
            <div class="p-5 bg-white border border-gray-200 rounded-2xl shadow-sm space-y-4">
                <div>
                    <label class="font-bold text-xl text-gray-800 mb-2 block">ì´ë¦„</label>
                    <input id="name" name="name" required
                           class="w-full px-4 py-3 border rounded-xl text-lg" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”" />
                </div>

                <div>
                    <label class="font-bold text-xl text-gray-800 mb-2 block">ì „í™”ë²ˆí˜¸</label>
                    <input id="phone" name="phone" required maxlength="11"
                           class="w-full px-4 py-3 border rounded-xl text-lg"
                           placeholder="01012345678"
                           oninput="this.value=this.value.replace(/[^0-9]/g,'')" />
                </div>
            </div>

            <!-- ìƒë…„ì›”ì¼ (8ìë¦¬) -->
            <div class="p-5 bg-white border border-gray-200 rounded-2xl shadow-sm">
                <label class="font-bold text-xl text-gray-800 mb-2 block">ìƒë…„ì›”ì¼ (8ìë¦¬)</label>
                <input id="birth_ymd" type="number" placeholder="ì˜ˆ: 19910328"
                       class="w-full px-4 py-3 border rounded-xl text-lg" />
            </div>

            <!-- ì¶œìƒ ì‹œê°„ -->
            <div class="p-5 bg-white border border-gray-200 rounded-2xl shadow-sm">
                <label class="font-bold text-xl text-gray-800 mb-2 block">ì¶œìƒ ì‹œê°„</label>

                <input id="birth_hm" type="number"
                       placeholder="ì˜ˆ: 0930 (ì˜¤ì „ 9ì‹œ 30ë¶„)"
                       class="w-full px-4 py-3 border rounded-xl text-lg mb-3" />

                <label class="inline-flex items-center mt-2">
                    <input type="checkbox" id="unknown_time" class="mr-2 h-5 w-5" />
                    <span class="text-gray-700 text-lg">ì‹œê°„ ëª¨ë¦„</span>
                </label>
            </div>

<!-- ì–‘ë ¥ / ìŒë ¥ / ìœ¤ë‹¬ -->
<div class="p-5 bg-white border border-gray-200 rounded-2xl shadow-sm space-y-4">
    <label class="font-bold text-xl text-gray-800 mb-2 block">ë‹¬ë ¥ ì¢…ë¥˜</label>

    <div class="flex gap-3">
        <div class="select-btn btn-toggle active" id="solarBtn" data-value="ì–‘ë ¥">ì–‘ë ¥</div>
        <div class="select-btn btn-toggle" id="lunarBtn" data-value="ìŒë ¥">ìŒë ¥</div>
    </div>

    <input type="hidden" id="solarlunar" name="solarlunar" value="ì–‘ë ¥">

    <label class="inline-flex items-center mt-3">
        <input type="checkbox" id="leapMonth" class="mr-2 h-5 w-5" />
        <span class="text-gray-700 text-lg">ìœ¤ë‹¬</span>
    </label>
</div>


            <!-- ê¶ê¸ˆí•œ ì  -->
            <div class="p-5 bg-white border border-gray-200 rounded-2xl shadow-sm">
                <label class="font-bold text-xl text-gray-800 mb-2 block">ê¶ê¸ˆí•œ ì </label>
                <textarea name="question" id="question" required
                          class="w-full px-4 py-3 border rounded-xl text-lg h-28"
                          placeholder="ì˜ˆ: ì˜¬í•´ ì¬ë¬¼ìš´ì´ ê¶ê¸ˆí•©ë‹ˆë‹¤."></textarea>
            </div>

            <!-- â˜… ìë™ ì‚¬ì£¼ ê³„ì‚° ê²°ê³¼ (ìˆ¨ê¹€) -->
            <input type="hidden" id="yearJoo" name="yearJoo">
            <input type="hidden" id="monthJoo" name="monthJoo">
            <input type="hidden" id="dayJoo" name="dayJoo">
            <input type="hidden" id="timeJoo" name="timeJoo">

            <!-- ë™ì˜ -->
            <div class="p-4 bg-gray-100 border border-gray-200 rounded-2xl">
                <label class="flex items-start">
                    <input id="agree_all" required type="checkbox"
                           class="mt-1 h-6 w-6 mr-3 text-blue-600" />
                    <span class="text-lg font-bold text-gray-800">
                        [í•„ìˆ˜] ê°œì¸ì •ë³´ ìˆ˜ì§‘Â·ì´ìš© ë° ê´‘ê³ ì„± ì •ë³´ ìˆ˜ì‹ ì— ë™ì˜í•©ë‹ˆë‹¤.
                        <span class="text-blue-500 underline cursor-pointer" onclick="showPolicyModal()">
                            ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨ ë³´ê¸°
                        </span>
                    </span>
                </label>
            </div>

            <!-- ë²„íŠ¼ -->
            <div class="text-center space-y-2" id="actionArea">
                <p id="channelGuide2"
                   class="font-bold text-yellow-600 text-xl leading-relaxed">
                    ğŸ’› ì´ì§€ì‚¬ì£¼ ì±„ë„ ì¶”ê°€ í›„<br>ë’¤ë¡œê°€ê¸° ëˆ„ë¥´ë©´ ê²°ê³¼ë³´ê¸° ë²„íŠ¼ì´ ë‚˜ì˜µë‹ˆë‹¤.
                </p>

                <button id="actionBtn" type="button"
                        class="w-full py-4 text-2xl font-extrabold text-white rounded-full
                               bg-yellow-500 hover:bg-yellow-600 shadow-lg hover:scale-105 transition">
                    ğŸ‘‰ ì¹œêµ¬ ì¶”ê°€ í•˜ê³  ë¬´ë£Œ ì‚¬ì£¼ ë³´ê¸°
                </button>
            </div>
        </form>

        <!-- ê²°ê³¼ì°½ -->
        <div id="resultContainer" class="hidden mt-10 text-center">
            <div class="rounded-2xl shadow-sm border border-gray-200 overflow-hidden bg-white">
                <h2 class="font-bold text-gray-800 pt-6 text-3xl">ğŸ”® ë¶„ì„ ê²°ê³¼ ğŸ”®</h2>
                <div id="fortuneResult"
                     class="p-6 text-xl leading-relaxed whitespace-pre-wrap text-left mb-6">
                </div>
            </div>

            <div class="text-center mt-8 mb-12 p-5 rounded-xl border border-yellow-400 bg-yellow-50 shadow-sm">
                <p class="text-2xl font-bold text-gray-800 mb-2">ğŸ ì´ì§€ì‚¬ì£¼ ì±„ë„ì— ê°€ì…í•˜ì…¨ë‚˜ìš”?</p>
                <p class="text-lg text-gray-700 leading-relaxed mb-4">
                    ì¹´ì¹´ì˜¤í†¡ <b class="text-blue-600">ì´ì§€ì‚¬ì£¼ ì±„ë„</b>ë¡œ ê°€ë©´ ì¹œêµ¬ ì „ìš© ì¿ í° ë©”ì‹œì§€ê°€ ë„ì°©í•©ë‹ˆë‹¤.<br>
                    [ì¿ í°ë°›ê¸°] ë²„íŠ¼ì„ ëˆŒëŸ¬ í˜œíƒì„ ë°›ì•„ë³´ì„¸ìš” ğŸŠ
                </p>
                <button onclick="window.open('https://pf.kakao.com/_xkAevn')"
                        class="px-6 py-3 text-xl font-bold text-white rounded-full bg-yellow-500 hover:bg-yellow-600 shadow-md">
                    ğŸ‘‰ ì´ì§€ì‚¬ì£¼ ì±„ë„ ë°”ë¡œê°€ê¸°
                </button>
            </div>
        </div>

    </div>
    <!-- â˜…â˜…â˜…â˜…â˜… ì´ˆê°„ê²° ì…ë ¥í¼ ì˜ì—­ ë â˜…â˜…â˜…â˜…â˜… -->
    <!-- â˜…â˜…â˜… í•˜ë‹¨ ì´ë¯¸ì§€ ì˜ì—­ â˜…â˜…â˜… -->
    <div class="image-section mt-8">
        <img src="images/saju1/022.png" class="scroll-to-form" />
        <img src="images/saju1/023.png" class="scroll-to-form" />
    </div>
</div> <!-- main-container ë -->

<!-- ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨ ëª¨ë‹¬ -->
<div id="policyModal"
     class="hidden fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50">
    <div class="bg-white rounded-2xl shadow-xl max-w-3xl w-full p-6 sm:p-8
                overflow-y-auto max-h-[90%] relative">

        <button onclick="closePolicyModal()"
                class="absolute top-3 right-4 text-gray-500 text-3xl font-bold">
            &times;
        </button>

        <h2 class="font-bold mb-6 text-3xl">ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨</h2>
        <div class="leading-relaxed text-gray-800 text-xl space-y-3">
            <p>ì´ì§€ì‚¬ì£¼ëŠ” ê³ ê°ë‹˜ì˜ ê°œì¸ì •ë³´ë¥¼ ë³´í˜¸í•˜ë©°, ì•„ë˜ì™€ ê°™ì´ ì²˜ë¦¬í•©ë‹ˆë‹¤.</p>
            <ul class="list-disc list-inside space-y-1">
                <li>ìˆ˜ì§‘ì •ë³´: ì´ë¦„, ì „í™”ë²ˆí˜¸, ì‚¬ì£¼ì •ë³´, ì„±ë³„, ë¬¸ì˜ë‚´ìš©</li>
                <li>ìˆ˜ì§‘ëª©ì : ì‚¬ì£¼ë¶„ì„ ê²°ê³¼ ì œê³µ ë° ìƒë‹´ì‘ëŒ€</li>
                <li>ë³´ìœ ê¸°ê°„: ìˆ˜ì§‘ í›„ 1ë…„ ë³´ê´€ í›„ íŒŒê¸°</li>
                <li>ê¶Œë¦¬: ê´‘ê³  ì •ë³´ ê±°ë¶€ ë° ê°œì¸ì •ë³´ ì‚­ì œ ìš”ì²­ ê°€ëŠ¥</li>
                <li>ë¬¸ì˜: easysaju.saju@gmail.com / 010-2151-3949</li>
            </ul>
        </div>

        <div class="mt-6 text-right">
            <button onclick="closePolicyModal()"
                    class="px-6 py-3 bg-blue-600 text-white rounded-lg">
                í™•ì¸
            </button>
        </div>
    </div>
</div>


<!-- ë¡œë”© ì˜¤ë²„ë ˆì´ -->
<div id="loadingOverlay"
     class="hidden fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50">
    <div class="text-white text-center animate-pulse">
        <svg class="animate-spin inline-block w-16 h-16" xmlns="http://www.w3.org/2000/svg"
             fill="none" viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10"
                    stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor"
                  d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"></path>
        </svg>
        <p class="mt-3 text-2xl">ì‚¬ì£¼ë¥¼ ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤...</p>
    </div>
</div>

<!-- Footer -->
<div id="copy" class="mt-10">
    <b>ì„œë¹„ìŠ¤ëª…: ì´ì§€ì‚¬ì£¼</b><br />
    ëŒ€í‘œì: ì•ˆë¯¸ì •<br />
    Contact: easysaju.saju@gmail.com<br />
    í†µì‹ íŒë§¤ì‹ ê³  ë²ˆí˜¸: 2025-ê³ ì–‘ì¼ì‚°ë™-1332
</div>


<!-- ======================= JS SCRIPT ì‹œì‘ ======================= -->

<script>
/* ì‚¬ì´ë“œ ë©”ë‰´ ë° ì´ë¯¸ì§€ ìŠ¤í¬ë¡¤ */
document.addEventListener("DOMContentLoaded", function () {
    const openNavBtn = document.getElementById("open-nav-btn");
    const closeNavBtn = document.getElementById("close-nav-btn");
    const sideNav = document.getElementById("side-nav");
    const navOverlay = document.getElementById("nav-overlay");

    // ì´ë¯¸ì§€ í´ë¦­ â†’ í¼ ì´ë™
    document.querySelectorAll(".scroll-to-form").forEach(img => {
        img.addEventListener("click", () => {
            document.getElementById("fortuneForm")
                .scrollIntoView({ behavior: "smooth", block: "start" });
        });
    });

    openNavBtn.addEventListener("click", () => {
        sideNav.classList.add("active");
        navOverlay.classList.add("active");
    });

    function closeMenu() {
        sideNav.classList.remove("active");
        navOverlay.classList.remove("active");
    }
    closeNavBtn.addEventListener("click", closeMenu);
    navOverlay.addEventListener("click", closeMenu);
});
</script>


<!-- ==================== ì„±ë³„/ì–‘ë ¥ ë²„íŠ¼ ì„ íƒ ë¡œì§ ==================== -->
<script>
function toggleButtons(btns, hiddenInput, value) {
    btns.forEach(b => b.classList.remove("active"));
    value.classList.add("active");
    hiddenInput.value = value.dataset.value;
}

/* ì„±ë³„ */
const genderInput = document.getElementById("gender");
const genderBtns = [document.getElementById("genderM"), document.getElementById("genderF")];

genderBtns.forEach(btn => {
    btn.addEventListener("click", () => {
        toggleButtons(genderBtns, genderInput, btn);
    });
});

/* ì–‘ë ¥/ìŒë ¥ */
const solarInput = document.getElementById("solarlunar");
const solarBtns = [document.getElementById("solarBtn"), document.getElementById("lunarBtn")];

solarBtns.forEach(btn => {
    btn.addEventListener("click", () => {
        toggleButtons(solarBtns, solarInput, btn);
    });
});
</script>


<!-- ====================== ìë™ ì‚¬ì£¼ ê³„ì‚° ====================== -->
<script>
async function calcGanji() {
    const ymd = document.getElementById("birth_ymd").value.trim();
    const hm = document.getElementById("birth_hm").value.trim();
    const unknown = document.getElementById("unknown_time").checked;

    if (ymd.length !== 8) return;

    const year = Number(ymd.substring(0, 4));
    const month = Number(ymd.substring(4, 6));
    const day = Number(ymd.substring(6, 8));

    let hour = 0, min = 0;

    if (!unknown && hm.length >= 3) {
        if (hm.length === 3) {
            hour = Number(hm.substring(0, 1));
            min  = Number(hm.substring(1, 3));
        } else {
            hour = Number(hm.substring(0, 2));
            min  = Number(hm.substring(2, 4));
        }
    }

    const isLunar = solarInput.value !== "ì–‘ë ¥";
    const leap = document.getElementById("leapMonth").checked;
    const isMale = (genderInput.value === "ë‚¨ì„±");

    const qs = new URLSearchParams({
        year, month, day, hour, min,
        isLunar, leap, isMale,
        pivotMin: "30", tzAdjust: "-30", seasonAdjust: "0"
    });

    try {
        const res = await fetch("https://my-manseryeok.onrender.com/saju/debug?" + qs.toString());
        if (!res.ok) throw new Error();

        const data = await res.json();
        if (!data.finalResult) return;

        const f = data.finalResult;

        const STEM = { ç”²:'ê°‘',ä¹™:'ì„',ä¸™:'ë³‘',ä¸:'ì •',æˆŠ:'ë¬´',å·±:'ê¸°',åºš:'ê²½',è¾›:'ì‹ ',å£¬:'ì„',ç™¸:'ê³„'};
        const BRANCH = {å­:'ì',ä¸‘:'ì¶•',å¯…:'ì¸',å¯:'ë¬˜',è¾°:'ì§„',å·³:'ì‚¬',åˆ:'ì˜¤',æœª:'ë¯¸',ç”³:'ì‹ ',é…‰:'ìœ ',æˆŒ:'ìˆ ',äº¥:'í•´'};

        function convert(h) {
            return STEM[h[0]] + BRANCH[h[1]];
        }

        document.getElementById("yearJoo").value = convert(f.yearGanji);
        document.getElementById("monthJoo").value = convert(f.monthGanji);
        document.getElementById("dayJoo").value = convert(f.dayGanji);
        document.getElementById("timeJoo").value = convert(f.hourGanji);

    } catch (e) {
        console.log("ë§Œì„¸ë ¥ ì˜¤ë¥˜", e);
    }
}

document.getElementById("birth_ymd").addEventListener("input", calcGanji);
document.getElementById("birth_hm").addEventListener("input", calcGanji);
document.getElementById("unknown_time").addEventListener("change", calcGanji);
solarBtns.forEach(b => b.addEventListener("click", calcGanji));
genderBtns.forEach(b => b.addEventListener("click", calcGanji));
document.getElementById("leapMonth").addEventListener("change", calcGanji);
</script>



<!-- ====================== Kakao ì±„ë„ + ì œì¶œ ë¡œì§ ====================== -->
<script>
const KAKAO_URL = "https://pf.kakao.com/_xkAevn/friend";
const actionBtn = document.getElementById("actionBtn");
const channelGuide2 = document.getElementById("channelGuide2");
const loadingOverlay = document.getElementById("loadingOverlay");
const fortuneForm = document.getElementById("fortuneForm");
const resultContainer = document.getElementById("resultContainer");

function showPolicyModal(){ document.getElementById("policyModal").classList.remove("hidden"); }
function closePolicyModal(){ document.getElementById("policyModal").classList.add("hidden"); }

function switchToResultMode() {
    channelGuide2.textContent = "ì´ì œ ë¬´ë£Œ ì‚¬ì£¼ ë¶„ì„ì„ ì‹œì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.";
    channelGuide2.classList.replace("text-yellow-600", "text-green-600");

    actionBtn.textContent = "ğŸ”® ë¬´ë£Œ ì‚¬ì£¼ ë¶„ì„ ê²°ê³¼ë³´ê¸°";
    actionBtn.className =
        "w-full py-4 text-2xl font-extrabold text-white rounded-full bg-gradient-to-r from-blue-500 to-purple-600 shadow-lg";
}

/* ---------------------------
   â­ í†µí•©ëœ actionBtn í´ë¦­ ë¡œì§
----------------------------*/
actionBtn.addEventListener("click", () => {

    // 1) ê°œì¸ì •ë³´ ë™ì˜ ì²´í¬ ë¨¼ì €
    const agree = document.getElementById("agree_all").checked;
    if (!agree) {
        alert("ğŸ“‹ ê°œì¸ì •ë³´ ìˆ˜ì§‘Â·ì´ìš© ë™ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.");
        return;
    }

    // 2) ì´ë¯¸ ì¹œêµ¬ì¶”ê°€ ìƒíƒœ â†’ ë°”ë¡œ ê²°ê³¼ ë¶„ì„ ì‹¤í–‰
    if (localStorage.getItem("joinedChannel")) {
        runAnalysis();
        return;
    }

    // 3) íŒì—…ì„ í´ë¦­ ì¦‰ì‹œ "ì²« ë²ˆì§¸ ì¤„"ì—ì„œ ë°”ë¡œ ì‹¤í–‰ â† â˜… ë§¤ìš° ì¤‘ìš”
    const popup = window.open(
        KAKAO_URL,
        "kakaoPopup",
        "width=480,height=720"
    );

    // íŒì—… ì°¨ë‹¨ ê°ì§€
    if (!popup) {
        alert("â— íŒì—…ì´ ì°¨ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤. ë¸Œë¼ìš°ì € ì„¤ì •ì—ì„œ íŒì—…ì„ í—ˆìš©í•´ì£¼ì„¸ìš”.");
        return;
    }

    // 4) íŒì—… ì°½ ë‹«í˜ ê°ì§€ â†’ ì¹œêµ¬ì¶”ê°€ ì™„ë£Œë¡œ íŒë‹¨
    const timer = setInterval(() => {
        if (popup.closed) {
            clearInterval(timer);

            // ì¹œêµ¬ì¶”ê°€ í”Œë˜ê·¸ ì €ì¥
            localStorage.setItem("joinedChannel", "true");

            // UIë¥¼ ê²°ê³¼ë³´ê¸° ëª¨ë“œë¡œ ë³€ê²½
            switchToResultMode();
        }
    }, 500);
});

/* ---------------------------
   â­ ê²°ê³¼ ë¶„ì„ ì‹¤í–‰ í•¨ìˆ˜
----------------------------*/
function runAnalysis() {
    loadingOverlay.classList.remove("hidden");

    setTimeout(() => {
        fortuneForm.submit();
    }, 50);
}

</script>


<!-- ì¹´ì¹´ì˜¤í†¡ í”Œë¡œíŒ… ë²„íŠ¼ -->
<style>
.kakao-chat-button {
    position: fixed; bottom: 25px; right: 25px; z-index: 999;
    width: 60px; height: 60px; background: #fee500; border-radius: 50%;
    display:flex; align-items:center; justify-content:center;
    box-shadow: 0 4px 8px rgba(0,0,0,.2); transition:.2s;
}
.kakao-chat-button:hover { transform: scale(1.05); }
.kakao-chat-button img { width: 32px; height: 32px; }
</style>

<a href="http://pf.kakao.com/_xkAevn/chat" target="_blank" class="kakao-chat-button">
    <img src="images/icons8-ì¹´ì¹´ì˜¤-í†¡-48.png" alt="ì¹´ì¹´ì˜¤í†¡ ì±„ë„ ì±„íŒ…í•˜ê¸°" />
</a>

</body>
</html>
