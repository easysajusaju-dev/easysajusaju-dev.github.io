<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>결제하기 - 이지사주</title>

<!-- ✅ NICEPAY FOR START SDK -->
<script src="https://pay.nicepay.co.kr/v1/js/"></script>

<style>
body {font-family: 'Noto Sans KR', sans-serif; margin:0; background:#f8f9fa;}
.wrapper {max-width:480px; margin:0 auto; background:#fff; padding:1rem;}
.title {font-size:1.4rem; font-weight:700; margin-bottom:1rem;}
.info {font-size:1rem; margin-bottom:0.5rem;}
.btn {width:100%; padding:1rem; background:#4a5a73; color:#fff; border:none; border-radius:8px;
font-size:1.1rem; cursor:pointer; margin-top:1rem;}
.btn:hover {background:#3c4d61;}
.price-box {background:#f1f3f5; padding:1rem; border-radius:8px; margin-bottom:1rem;}
</style>
</head>

<body>
<div class="wrapper">
  <h2 class="title">복채 결제하기</h2>

  <div class="price-box">
    <div class="info">상품명: <span id="p-name"></span></div>
    <div class="info">결제금액: <span id="p-price"></span>원</div>
  </div>

  <button class="btn" id="payBtn">카드결제 진행</button>
</div>

<script>
// ✅ URL 파라미터 읽기
const qs = new URLSearchParams(location.search);
const orderId = qs.get("oid");
const productName = qs.get("product");
const price = Number(qs.get("price"));

// ✅ 화면 표시
document.getElementById("p-name").textContent = productName;
document.getElementById("p-price").textContent = price.toLocaleString();

// ✅ 포스타트 clientKey (네가 받은 값)
const clientKey = "R2_29330d4bbbe14f5c85925e52e48e0721";

// ✅ 결제 버튼 클릭
document.getElementById("payBtn").addEventListener("click", function () {
  console.log("✅ 결제 요청 시작");

  window.nicepay.pay({
    clientId: clientKey,
    method: "card",
    orderId: orderId,
    amount: price,
    goodsName: productName,

    // ✅ thankyou.html 자동 이동 (어디 폴더든 OK)
    returnUrl: window.location.href.replace("payment.html", "thankyou.html")
  });
});
</script>
</body>
</html>
