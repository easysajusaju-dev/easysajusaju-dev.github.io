<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ê²°ì œí•˜ê¸° - ì´ì§€ì‚¬ì£¼</title>

<!-- âœ… ë‚˜ì´ìŠ¤í˜ì´ Start ìœ„ì ¯ SDK -->
<script src="https://pay.nicepay.co.kr/v1/js/"></script>

<style>
/* (ê¸°ì¡´ ìŠ¤íƒ€ì¼ ë™ì¼ â€” ì‚­ì œ ì•ˆí•¨) */
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap');
:root { --primary-color:#4a5a73; --kakao-yellow:#FEE500; --naver-green:#03C75A; --text-dark:#212529; --text-light:#6C757D; --bg-light:#f8f9fa; --border-color:#dee2e6;}
body{margin:0;font-family:'Noto Sans KR',sans-serif;background-color:var(--bg-light);color:var(--text-dark);}
.wrapper{max-width:480px;margin:0 auto;background:#fff;box-shadow:0 4px 12px rgba(0,0,0,.08);}
.header{display:flex;align-items:center;justify-content:center;padding:1rem;border-bottom:1px solid var(--border-color);}
.header .back-btn{position:absolute;left:1rem;font-size:1.5rem;background:none;border:none;cursor:pointer;}
.banner{position:relative;height:140px;color:#fff;padding:1rem;display:flex;flex-direction:column;justify-content:center;}
.banner .bg-img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;z-index:1;}
.banner::after{content:"";position:absolute;inset:0;background:rgba(0,0,0,0.4);z-index:2;}
.banner .text-content{z-index:3;}
.price-info{display:flex;justify-content:space-between;margin-bottom:.6rem;}
.price-info.total{font-size:1.2rem;font-weight:700;padding-top:1rem;border-top:1px solid var(--border-color);}
.btn{padding:.85rem;font-size:1rem;font-weight:700;border-radius:8px;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:.5rem;}
.btn-kakao{background:var(--kakao-yellow);}
.btn-naver{background:var(--naver-green);color:#fff;}
.btn-primary{background:var(--primary-color);color:#fff;}
</style>
</head>

<body>

<div class="wrapper">
<header class="header">
<button class="back-btn" onclick="history.back()">&lt;</button>
<h1>ê²°ì œí•˜ê¸°</h1>
</header>

<div class="banner">
<img src="/images/card-individual.png" class="bg-img">
<div class="text-content">
<p class="subtitle">ë‹¹ì‹ ì˜ ìš´ëª…ì„ í’€ì–´ë‚´ëŠ” ê³³</p>
<h2 class="title">ì´ì§€ì‚¬ì£¼</h2>
<p class="desc">ë³µì±„ ê²°ì œí•˜ê¸°</p>
</div>
</div>

<main style="padding:1.5rem">

<!-- âœ… ê¸ˆì•¡ í‘œì‹œ -->
<div class="price-info">
<span class="label" id="pay-product-name">ìƒí’ˆëª…</span>
<span class="amount" id="pay-product-price">0ì›</span>
</div>
<div class="price-info">
<span>í• ì¸ ì ìš©</span><span id="pay-discount">-0ì›</span>
</div>
<div class="price-info total">
<span>ìµœì¢… ê²°ì œê¸ˆì•¡</span><span id="pay-final-price">0ì›</span>
</div>

<!-- âœ… ë²„íŠ¼ -->
<div style="margin-top:1.5rem">
<button class="btn btn-kakao" onclick="requestPay('kakao')">ì¹´ì¹´ì˜¤í˜ì´</button>
<button class="btn btn-naver" onclick="alert('ë„¤ì´ë²„ëŠ” ì¤€ë¹„ì¤‘ì…ë‹ˆë‹¤ ğŸ™‚')">ë„¤ì´ë²„í˜ì´</button>
<button class="btn btn-primary" onclick="requestPay('card')">ì¼ë°˜ê²°ì œ (ì¹´ë“œ)</button>
</div>

</main>
</div>

<!-- âœ… NICEPAY ìœ„ì ¯ SDK -->
<script src="https://pay.nicepay.co.kr/v1/js/"></script>

<script>
window.nicepay = window.nicepay || {}; // âœ… nicepay ê°ì²´ ë³´ì¥

function getParam(k){return new URLSearchParams(location.search).get(k);}
const oid = getParam("oid");
const product = decodeURIComponent(getParam("product")||"ìƒí’ˆ");
const price = Number(getParam("price")||0);

// âœ… UI ë°˜ì˜
document.addEventListener("DOMContentLoaded", () => {
  document.querySelector(".title").textContent = `ì´ì§€ì‚¬ì£¼ - ${product}`;
  document.getElementById("pay-product-name").textContent = product;
  document.getElementById("pay-product-price").textContent = `${price.toLocaleString()}ì›`;
  document.getElementById("pay-final-price").textContent = `${price.toLocaleString()}ì›`;
});

// âœ… ê²°ì œ í˜¸ì¶œ
function requestPay(type){
  if(type==="kakao"){
    location.href=`thankyou.html?oid=${oid}&product=${encodeURIComponent(product)}&price=${price}&method=kakao&success=1`;
    return;
  }

  if(type==="card"){
    // âœ… nicepay widget í˜¸ì¶œ
    nicepay.requestPay({
      clientId:"R2_29330d4bbbe14f5c85925e52e48e0721",
      method:"CARD",
      orderId:oid,
      amount:price,
      goodsName:product,
      returnUrl:"https://easysajusaju-dev.github.io/thankyou.html"
    });
  }
}
</script>

</body>
</html>
