<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ê²°ì œí•˜ê¸° - ì´ì§€ì‚¬ì£¼</title>

<script src="https://pay.nicepay.co.kr/v1/js/"></script>

<style>
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap');
:root {
  --primary-color:#4a5a73; --kakao-yellow:#FEE500; --naver-green:#03C75A;
  --text-dark:#212529; --text-light:#6C757D; --bg-light:#f8f9fa; --border-color:#dee2e6;
}
body {margin:0;font-family:'Noto Sans KR',sans-serif;background:var(--bg-light);color:var(--text-dark);}
.wrapper {max-width:480px;margin:0 auto;background:#fff;box-shadow:0 4px 12px rgba(0,0,0,0.08);}
.header {display:flex;align-items:center;justify-content:center;position:sticky;top:0;background:#fff;padding:1rem;border-bottom:1px solid var(--border-color);}
.header .back-btn {position:absolute;left:1rem;font-size:1.5rem;background:none;border:none;cursor:pointer;}
.banner {position:relative;height:140px;color:#fff;padding:1rem;display:flex;flex-direction:column;justify-content:center;}
.banner .bg-img {position:absolute;inset:0;width:100%;height:100%;object-fit:cover;z-index:1;}
.banner::after {content:"";position:absolute;inset:0;background:linear-gradient(to right,rgba(29,43,80,.7),rgba(44,62,80,.4));z-index:2;}
.banner .text-content {position:relative;z-index:3;}
.banner .subtitle {margin:0;font-size:.9rem;}
.banner .title {margin:.25rem 0;font-size:2.1rem;font-weight:700;}
.banner .desc {margin:0;font-size:1.2rem;}
main {padding:1.5rem;}
.card {background:#fff;border-radius:12px;padding:1.5rem;margin-bottom:1rem;}
.card-title {font-size:1.1rem;font-weight:700;margin:0 0 .5rem 0;}
.price-info {display:flex;justify-content:space-between;font-size:1rem;margin-bottom:1rem;}
.price-info.total {font-size:1.2rem;font-weight:700;padding-top:1rem;border-top:1px solid var(--border-color);}
.payment-buttons {display:flex;flex-direction:column;gap:.75rem;margin-top:1.5rem;}
.sns-payment-group {display:flex;gap:.75rem;}
.btn {display:flex;align-items:center;justify-content:center;padding:.85rem;font-size:1rem;font-weight:700;border:none;border-radius:8px;cursor:pointer;gap:.5rem;}
.btn-kakao{background:var(--kakao-yellow);color:#000;}
.btn-naver{background:var(--naver-green);color:#fff;}
.btn-primary{background:var(--primary-color);color:#fff;}
.btn img{height:16px;}
</style>
</head>

<body>
<div class="wrapper">
<header class="header">
  <button class="back-btn" onclick="history.back()">&lt;</button>
  <h1>ê²°ì œí•˜ê¸°</h1>
</header>

<div class="banner">
  <img src="/images/card-individual.png" class="bg-img" />
  <div class="text-content">
    <p class="subtitle">ë‹¹ì‹ ì˜ ìš´ëª…ì„ í’€ì–´ë‚´ëŠ” ê³³</p>
    <h2 class="title">ì´ì§€ì‚¬ì£¼</h2>
    <p class="desc">ë³µì±„ ê²°ì œí•˜ê¸°</p>
  </div>
</div>

<main>
  <!-- ìƒí’ˆ ì •ë³´ í‘œì‹œ -->
  <div class="card">
    <h3 class="card-title">ì£¼ë¬¸ ì •ë³´</h3>
    <div class="price-info"><span>ìƒí’ˆëª…</span><span id="productName"></span></div>
    <div class="price-info total"><span>ìµœì¢… ê²°ì œê¸ˆì•¡</span><span id="productPrice"></span></div>
  </div>

  <div class="card">
    <h3 class="card-title">ê²°ì œ ë°©ì‹</h3>

    <div class="payment-buttons">
      <div class="sns-payment-group">
        <button class="btn btn-kakao" onclick="alert('ì¹´ì¹´ì˜¤í˜ì´ëŠ” ê³§ ì—´ë¦½ë‹ˆë‹¤ ğŸ˜Š')">
          <img src="images/á„á…¡á„á…¡á„‹á…©á„‘á…¦á„‹á…µ_CI_combination_with_BG.png" />
          ì¹´ì¹´ì˜¤í˜ì´
        </button>
        <button class="btn btn-naver" onclick="alert('ë„¤ì´ë²„í˜ì´ëŠ” ê³§ ì—´ë¦½ë‹ˆë‹¤ ğŸ˜Š')">
          <img src="images/badge_npay.png" />
          ë„¤ì´ë²„í˜ì´
        </button>
      </div>

      <button class="btn btn-primary" id="payBtn">ì¼ë°˜ ì¹´ë“œê²°ì œ</button>
    </div>
  </div>
</main>
</div>

<!-- âœ… ê°€ê²© í…Œì´ë¸” + ê²€ì¦ + NICEPAY SCRIPT -->
<script>
const PRICE_TABLE = {
  "ì¢…í•©ì‚¬ì£¼ ë¯¸ë‹ˆ": 5000,
  "ì‹ ë…„ìš´ì„¸": 19900,
  "ì¢…í•©ì‚¬ì£¼": 34900,
  "ì¬ë¬¼ì‚¬ì£¼": 14900,
  "ê²°í˜¼ì‚¬ì£¼": 12900,
  "ì—°ì• ì‚¬ì£¼": 9900,
  "ì—°ì• íŒ¨í‚¤ì§€": 19900,
  "íƒ€ì´ë°íŒ¨í‚¤ì§€": 26900,
  "ì¸ìƒíŒ¨í‚¤ì§€": 39900,
  "ì¬íšŒìš´": 29900,
  "ê¶í•©ì‚¬ì£¼": 29900
};

const params = new URLSearchParams(location.search);
const oid = params.get("oid");
const product = params.get("product");
const price = Number(params.get("price"));

// êµì°¨ ê²€ì¦
const realPrice = PRICE_TABLE[product];
if (!realPrice || realPrice !== price) {
  alert("ğŸš¨ ê²°ì œê¸ˆì•¡ì´ ì•ˆì „í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
  location.href = "/"; throw new Error("Tamper");
}

// UI ë°˜ì˜
document.getElementById("productName").textContent = product;
document.getElementById("productPrice").textContent = realPrice.toLocaleString()+"ì›";

// âœ… NICEPAY ê²°ì œ í˜¸ì¶œ
document.getElementById("payBtn").addEventListener("click", () => {
  try {
    AUTHNICE.requestPay({
      clientId: "R2_29330d4bbbe14f5c85925e52e48e0721",
      method: "card",
      orderId: oid,
      amount: realPrice,
      goodsName: product,
      returnUrl: location.origin + "/thankyou.html"
    });
  } catch(e) {
    alert("ê²°ì œ í˜¸ì¶œ ì˜¤ë¥˜: "+e);
  }
});
</script>
</body>
</html>
